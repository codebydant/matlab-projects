syms c1 c2 c3 c4 s1 s2 s3 s4 L1 L2; 
T01=[c1 -s1 0 0;s1 c1 0 0;0 0 1 0;0 0 0 1];
T12=[c2 -s2 0 0;0 0 -1 0;s2 c2 0 0;0 0 0 1];
T23=[c3 -s3 0 L1;s3 c3 0 0;0 0 1 0;0 0 0 1];
T34=[c4 -s4 0 L2;s4 c4 0 0;0 0 1 0;0 0 0 1];
T24=T23*T34; 
syms c34 s34; 
T24=[c34 -s34 0 L1+L2*c3;s34 c34 0 L2*s3;0 0 1 0;0 0 0 1];
T14=T12*T24;
syms c234 s234;
T14=[c234 -s234 0 c2*(L1+L2*c3)-L2*s2*s3;0 0 -1 0;s234 c234 0 s2*(L1+L2*c3)+L2*c2*s3;0 0 0 1];
T04=T01*T14;
X=c1*(c2*(L1 + L2*c3) - L2*s2*s3);
Y=s1*(c2*(L1 + L2*c3) - L2*s2*s3);
Z=s2*(L1 + L2*c3) + L2*c2*s3;
Res=factor(X^2+Y^2+Z^2);



 
